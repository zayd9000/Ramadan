<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erbil Ramadan 2026</title>
    <style>
        :root {
            --navy: #0f172a;
            --card-bg: #1e293b;
            --gold: #fbbf24;
            --text-gray: #94a3b8;
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--navy); color: white; margin: 0; padding: 15px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 450px; display: flex; flex-direction: column; gap: 15px; }

        .lang-switcher { display: flex; gap: 5px; justify-content: flex-end; }
        .lang-btn { background: #334155; border: none; color: white; padding: 5px 12px; border-radius: 6px; cursor: pointer; font-size: 0.75rem; transition: 0.3s; }
        .lang-btn.active { background: var(--gold); color: black; font-weight: bold; }

        .card { background: var(--card-bg); padding: 20px; border-radius: 20px; border: 1px solid rgba(251, 191, 36, 0.2); box-shadow: 0 10px 25px rgba(0,0,0,0.4); }
        .card-title { font-size: 1.1rem; font-weight: bold; margin-bottom: 15px; color: var(--gold); display: flex; align-items: center; gap: 10px; }
        
        .timer-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .clock { font-size: 2rem; font-weight: bold; font-family: monospace; letter-spacing: 1px; }
        .badge { background: var(--gold); color: black; padding: 5px 12px; border-radius: 10px; font-size: 0.85rem; font-weight: bold; }

        .progress-bg { background: #0f172a; height: 12px; border-radius: 6px; overflow: hidden; margin: 12px 0; border: 1px solid #334155; }
        .progress-fill { background: linear-gradient(90deg, #f59e0b, #fbbf24); height: 100%; width: 0%; transition: 1s cubic-bezier(0.4, 0, 0.2, 1); }

        .prayer-auto-list { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .prayer-status { padding: 12px; background: rgba(255,255,255,0.03); border-radius: 10px; font-size: 0.9rem; display: flex; justify-content: space-between; align-items: center; border: 1px solid rgba(255,255,255,0.05); }
        .status-done { color: #22c55e; font-weight: bold; }
        .status-wait { color: var(--text-gray); font-family: monospace; }

        .dua-box { border-left: 3px solid var(--gold); padding-left: 15px; line-height: 1.6; }
        .rtl { direction: rtl; text-align: right; border-left: none; border-right: 3px solid var(--gold); padding-right: 15px; }
        .dua-lang { display: block; margin-bottom: 10px; font-size: 0.95rem; color: #e2e8f0; }
    </style>
</head>
<body>

<div class="container">
    <div class="lang-switcher">
        <button class="lang-btn active" onclick="setLang('en')">English</button>
        <button class="lang-btn" onclick="setLang('ku')">Kurdish</button>
        <button class="lang-btn" onclick="setLang('ar')">Arabic</button>
    </div>

    <div class="card">
        <div class="timer-row">
            <div id="date-label" style="color: var(--text-gray);">Sunday, Feb 8</div>
            <div id="live-clock" class="clock">00:00:00</div>
        </div>
        <div style="display: flex; gap: 10px; flex-wrap: wrap;">
            <div id="iftar-timer" class="badge">â³ Calculating...</div>
            <div id="fasting-status" class="badge" style="background: #334155; color: white; border: 1px solid var(--gold);">--</div>
        </div>
    </div>

    <div class="card">
        <div class="card-title" id="t-quran">ğŸ“– Quran Progress</div>
        <div style="display: flex; justify-content: space-between; font-size: 0.95rem;">
            <span id="t-pages">Pages Read</span>
            <span><strong id="pages-count">0</strong> / 604</span>
        </div>
        <div class="progress-bg"><div id="q-bar" class="progress-fill"></div></div>
        <p id="quran-message" style="font-size: 0.75rem; color: var(--gold); margin: 0;"></p>
    </div>

    <div class="card">
        <div class="card-title" id="t-worship">âœ… Daily Worship (Auto)</div>
        <div class="prayer-auto-list" id="prayer-list"></div>
    </div>

    <div class="card">
        <div class="card-title">âœ¨ Daily Dua | Ø¯ÙˆØ¹Ø§</div>
        <div id="dua-container" class="dua-box">
            <span class="dua-lang"><strong>EN:</strong> "O Allah, let us reach Ramadan in a state of peace and faith."</span>
            <span class="dua-lang rtl"><strong>KU:</strong> "Ø®ÙˆØ§ÛŒÛ• Ø¨Ù…Ø§Ù†Ú¯Û•ÛŒÛ•Ù†ÛŒØªÛ• Ú•Û•Ù…Û•Ø²Ø§Ù† Ø¨Û• Ø³Û•Ù„Ø§Ù…Û•ØªÛŒ Ùˆ Ø¦ÛŒÙ…Ø§Ù†Û•ÙˆÛ•."</span>
            <span class="dua-lang rtl"><strong>AR:</strong> "Ø§Ù„Ù„Ù‡Ù… Ø¨Ù„ØºÙ†Ø§ Ø±Ù…Ø¶Ø§Ù† ÙˆØ£Ù†Øª Ø±Ø§Ø¶Ù Ø¹Ù†Ø§."</span>
        </div>
    </div>
</div>

<script>
    const ramadanStartDate = new Date("2026-02-18T00:00:00");
    let currentLang = 'en';

    const translations = {
        en: { quran: "Quran Progress", pages: "Pages Read", worship: "Daily Worship (Auto)", done: "Done", pending: "Waiting", countdown: "Days until Ramadan", fasting: "Days Fasted", startSoon: "Tracking starts on Day 1" },
        ku: { quran: "Ù¾ÛØ´Ú©Û•ÙˆØªÙ†ÛŒ Ù‚ÙˆØ±Ø¦Ø§Ù†", pages: "Ù„Ø§Ù¾Û•Ú•Û•Ú©Ø§Ù†", worship: "Ø¹ÛŒØ¨Ø§Ø¯Û•Øª (Ø®Û†Ú©Ø§Ø±)", done: "ØªÛ•ÙˆØ§Ùˆ", pending: "Ú†Ø§ÙˆÛ•Ú•ÙˆØ§Ù†", countdown: "Ú•Û†Ú˜ Ø¨Û† Ú•Û•Ù…Û•Ø²Ø§Ù†", fasting: "Ú•Û†Ú˜ÛŒ Ø¨Û•Ú•Û†Ú˜ÙˆÙˆ Ø¨ÙˆÙˆÙ†", startSoon: "Ù„Û• Ú•Û†Ú˜ÛŒ ÛŒÛ•Ú©Û•Ù… Ø¯Û•Ø³ØªÙ¾ÛØ¯Û•Ú©Ø§Øª" },
        ar: { quran: "Ø®ØªÙ… Ø§Ù„Ù‚Ø±Ø¢Ù†", pages: "Ø§Ù„ØµÙØ­Ø§Øª", worship: "Ø§Ù„Ø¹Ø¨Ø§Ø¯Ø§Øª (ØªÙ„Ù‚Ø§Ø¦ÙŠ)", done: "ØªÙ…", pending: "Ø§Ù†ØªØ¸Ø§Ø±", countdown: "ÙŠÙˆÙ… Ù„Ø±Ù…Ø¶Ø§Ù†", fasting: "Ø£ÙŠØ§Ù… Ø§Ù„ØµÙŠØ§Ù…", startSoon: "ÙŠØ¨Ø¯Ø£ Ø§Ù„ØªØªØ¨Ø¹ ÙÙŠ Ø§Ù„ÙŠÙˆÙ… Ø§Ù„Ø£ÙˆÙ„" }
    };

    const prayerTimes = [
        { id: 'fajr', name: { en: 'Fajr', ku: 'Ø¨Û•ÛŒØ§Ù†ÛŒ', ar: 'Ø§Ù„ÙØ¬Ø±' }, time: "05:22", pages: 4 },
        { id: 'dhuhr', name: { en: 'Dhuhr', ku: 'Ù†ÛŒÙˆÛ•Ú•Û†', ar: 'Ø§Ù„Ø¸Ù‡Ø±' }, time: "12:18", pages: 4 },
        { id: 'asr', name: { en: 'Asr', ku: 'Ø¹Û•Ø³Ø±', ar: 'Ø§Ù„Ø¹ØµØ±' }, time: "15:14", pages: 4 },
        { id: 'maghrib', name: { en: 'Maghrib', ku: 'Ø¦ÛÙˆØ§Ø±Û•', ar: 'Ø§Ù„Ù…ØºØ±Ø¨' }, time: "17:48", pages: 4 },
        { id: 'isha', name: { en: 'Isha', ku: 'Ø®Û•ÙˆØªÙ†Ø§Ù†', ar: 'Ø§Ù„Ø¹Ø´Ø§Ø¡' }, time: "19:04", pages: 4 }
    ];

    function updateHub() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-GB', { hour12: false });
        const shortTime = timeStr.substring(0, 5);
        
        document.getElementById('live-clock').innerText = timeStr;
        document.getElementById('date-label').innerText = now.toLocaleDateString('en-US', { weekday: 'long', month: 'short', day: 'numeric' });

        // Fasting & Countdown Logic
        const diffMs = ramadanStartDate - now;
        const diffDays = Math.ceil(diffMs / (1000 * 60 * 60 * 24));
        const fastingEl = document.getElementById('fasting-status');
        const isRamadan = diffMs <= 0;

        let activeRamadanDay = 0;
        if (isRamadan) {
            activeRamadanDay = Math.floor(Math.abs(diffMs) / (1000 * 60 * 60 * 24)) + 1;
            fastingEl.innerText = `${activeRamadanDay} ${translations[currentLang].fasting}`;
            document.getElementById('quran-message').innerText = "";
        } else {
            fastingEl.innerText = `${diffDays} ${translations[currentLang].countdown}`;
            document.getElementById('quran-message').innerText = translations[currentLang].startSoon;
        }

        // Iftar Timer
        const [cH, cM] = shortTime.split(':').map(Number);
        const [iH, iM] = ["17", "48"];
        const minsToIftar = (iH * 60 + iM) - (cH * 60 + cM);
        const iftarEl = document.getElementById('iftar-timer');
        
        if (minsToIftar > 0) {
            iftarEl.innerText = `â³ Iftar in ${Math.floor(minsToIftar/60)}h ${minsToIftar%60}m`;
        } else {
            iftarEl.innerText = "ğŸ½ï¸ Iftar Time!";
        }

        // Worship & Quran Logic (Only active if isRamadan is true)
        let pagesReadToday = 0;
        const list = document.getElementById('prayer-list');
        list.innerHTML = '';

        prayerTimes.forEach(p => {
            const passed = shortTime >= p.time;
            if (isRamadan && passed) pagesReadToday += p.pages;
            
            const item = document.createElement('div');
            item.className = 'prayer-status';
            item.innerHTML = `
                <span>${p.name[currentLang]}</span>
                <span class="${passed ? 'status-done' : 'status-wait'}">${passed ? translations[currentLang].done : p.time}</span>
            `;
            list.appendChild(item);
        });

        // Global Quran Progress (Assuming cumulative for the whole month)
        // If it's Day 5, we add previous days (Day 1-4) + today's progress
        let totalCompletedPages = isRamadan ? ((activeRamadanDay - 1) * 20) + pagesReadToday : 0;
        
        document.getElementById('pages-count').innerText = totalCompletedPages;
        document.getElementById('q-bar').style.width = (totalCompletedPages / 604 * 100) + '%';
    }

    function setLang(lang) {
        currentLang = lang;
        document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');
        
        document.getElementById('t-quran').innerText = translations[lang].quran;
        document.getElementById('t-pages').innerText = translations[lang].pages;
        document.getElementById('t-worship').innerText = translations[lang].worship;
        
        const container = document.getElementById('dua-container');
        if (lang === 'en') container.classList.remove('rtl');
        else container.classList.add('rtl');
        
        updateHub();
    }

    setInterval(updateHub, 1000);
    updateHub();
</script>
</body>
</html>
