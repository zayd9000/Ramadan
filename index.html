<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ramadan Companion - Erbil</title>
    <style>
        :root {
            --ramadan-green: #14532d;
            --ramadan-gold: #fbbf24;
            --bg-color: #f8fafc;
        }

        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-color); margin: 0; padding: 15px; display: flex; justify-content: center; }
        .container { width: 100%; max-width: 450px; display: flex; flex-direction: column; gap: 15px; }

        .header-card {
            background: var(--ramadan-green);
            color: white;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }

        .header-main { display: flex; justify-content: space-between; align-items: center; }
        .clock { font-size: 2rem; font-weight: bold; font-family: monospace; }
        
        .status-row { display: flex; gap: 8px; margin-top: 10px; }
        .badge { background: var(--ramadan-gold); color: black; padding: 4px 10px; border-radius: 8px; font-size: 0.8rem; font-weight: bold; }
        .badge.day-count { background: rgba(255,255,255,0.2); color: white; border: 1px solid rgba(255,255,255,0.3); }

        .prayer-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; margin-top: 20px; }
        .p-item { background: rgba(255,255,255,0.1); padding: 8px 2px; text-align: center; border-radius: 10px; font-size: 0.7rem; border: 1px solid rgba(255,255,255,0.05); }
        .p-item strong { display: block; font-size: 0.85rem; }
        .p-item.active { background: var(--ramadan-gold); color: black; font-weight: bold; transform: scale(1.05); }

        .card { background: white; padding: 18px; border-radius: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); }
        .card-title { font-weight: bold; color: var(--ramadan-green); margin-bottom: 12px; display: flex; align-items: center; gap: 8px; }
        
        .dua-box { font-style: italic; color: #334155; border-left: 3px solid var(--ramadan-gold); padding-left: 12px; margin: 10px 0; line-height: 1.5; font-size: 0.95rem; }

        .progress-bg { background: #e2e8f0; height: 10px; border-radius: 10px; overflow: hidden; margin-top: 10px; }
        .progress-fill { background: #22c55e; height: 100%; width: 0%; transition: 0.5s; }
        
        .checklist { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        label { display: flex; align-items: center; gap: 8px; font-size: 0.9rem; cursor: pointer; padding: 5px; border-radius: 5px; transition: 0.2s; }
        label:hover { background: #f1f5f9; }
        input[type="checkbox"] { accent-color: var(--ramadan-green); width: 18px; height: 18px; }
    </style>
</head>
<body>

<div class="container">
    <div class="header-card">
        <div class="header-main">
            <div>
                <h3 style="margin:0;">Ramadan 2026</h3>
                <div id="date-str" style="opacity: 0.8; font-size: 0.85rem;">Sunday, Feb 8</div>
            </div>
            <div id="live-clock" class="clock">00:00:00</div>
        </div>
        <div class="status-row">
            <div id="iftar-timer" class="badge">Calculating Iftar...</div>
            <div id="days-info" class="badge day-count">--</div>
        </div>
        <div class="prayer-grid">
            <div class="p-item" id="fajr">Fajr<strong>05:22</strong></div>
            <div class="p-item" id="dhuhr">Dhuhr<strong>12:18</strong></div>
            <div class="p-item" id="asr">Asr<strong>15:14</strong></div>
            <div class="p-item" id="maghrib">Iftar<strong>17:37</strong></div>
            <div class="p-item" id="isha">Isha<strong>19:04</strong></div>
        </div>
    </div>

    <div class="card">
        <div class="card-title">âœ¨ Daily Dua | Ø¯ÙˆØ¹Ø§ÛŒ Ú•Û†Ú˜</div>
        <div id="daily-dua" class="dua-box">"O Allah, make us reach Ramadan in a state of peace and faith."</div>
        <div style="font-size: 0.85rem; color: #64748b;"><strong>Current Phase:</strong> <span id="ramadan-phase">Pre-Ramadan Preparation</span></div>
    </div>

    <div class="card">
        <div style="display: flex; justify-content: space-between; align-items: center;">
            <div class="card-title" style="margin:0;">ðŸ“– Quran Progress</div>
            <div><input type="number" id="q-juz" value="0" min="0" max="30" style="width: 45px; text-align: center; border: 1px solid #ddd; border-radius: 4px;" oninput="updateData()"> / 30</div>
        </div>
        <div class="progress-bg"><div id="q-bar" class="progress-fill"></div></div>
    </div>

    <div class="card">
        <div class="card-title">âœ… Daily Worship | Ø¹ÛŒØ¨Ø§Ø¯Û•Øª</div>
        <div class="checklist">
            <label><input type="checkbox" class="cb" onchange="updateData()"> Fajr / Ø¨Û•ÛŒØ§Ù†ÛŒ</label>
            <label><input type="checkbox" class="cb" onchange="updateData()"> Dhuhr / Ù†ÛŒÙˆÛ•Ú•Û†</label>
            <label><input type="checkbox" class="cb" onchange="updateData()"> Asr / Ø¹Û•Ø³Ø±</label>
            <label><input type="checkbox" class="cb" onchange="updateData()"> Maghrib / Ø¦ÛŽÙˆØ§Ø±Û•</label>
            <label><input type="checkbox" class="cb" onchange="updateData()"> Isha / Ø®Û•ÙˆØªÙ†Ø§Ù†</label>
            <label><input type="checkbox" class="cb" onchange="updateData()"> Taraweeh / ØªÛ•Ø±Ø§ÙˆÛŒØ­</label>
        </div>
    </div>
</div>

<script>
    function updateApp() {
        const now = new Date();
        const timeStr = now.toLocaleTimeString('en-GB');
        const shortTime = timeStr.substring(0, 5);
        
        document.getElementById('live-clock').innerText = timeStr;
        document.getElementById('date-str').innerText = now.toLocaleDateString('en-US', {weekday: 'long', month: 'short', day: 'numeric'});

        // Countdown Logic
        const ramadanStart = new Date("2026-02-18T00:00:00");
        const diffTime = ramadanStart - now;
        const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        const dayInfoEl = document.getElementById('days-info');

        if (diffDays > 0) {
            dayInfoEl.innerText = `${diffDays} Days until Ramadan`;
            document.getElementById('ramadan-phase').innerText = "Preparing for Ramadan";
        } else {
            const currentDay = Math.abs(Math.floor(diffTime / (1000 * 60 * 60 * 24))) + 1;
            dayInfoEl.innerText = `Day ${Math.min(currentDay, 30)} of Ramadan`;
            document.getElementById('ramadan-phase').innerText = "Active Month of Fasting";
        }

        // Iftar Logic (Erbil 17:37)
        const iftarTime = "17:37";
        const [cH, cM] = shortTime.split(':').map(Number);
        const [iH, iM] = iftarTime.split(':').map(Number);
        const minsLeft = (iH * 60 + iM) - (cH * 60 + cM);
        
        const timerEl = document.getElementById('iftar-timer');
        if (minsLeft > 0) {
            timerEl.innerText = `â³ Iftar in ${Math.floor(minsLeft/60)}h ${minsLeft%60}m`;
        } else if (minsLeft > -60) {
            timerEl.innerText = "ðŸ½ï¸ Iftar Time!";
        } else {
            timerEl.innerText = "ðŸŒ™ Fasting starts at Fajr";
        }

        // Prayer Highlighting
        const times = { fajr: "05:22", dhuhr: "12:18", asr: "15:14", maghrib: "17:37", isha: "19:04" };
        document.querySelectorAll('.p-item').forEach(el => el.classList.remove('active'));
        if (shortTime < times.fajr) document.getElementById('fajr').classList.add('active');
        else if (shortTime < times.dhuhr) document.getElementById('dhuhr').classList.add('active');
        else if (shortTime < times.asr) document.getElementById('asr').classList.add('active');
        else if (shortTime < times.maghrib) document.getElementById('maghrib').classList.add('active');
        else document.getElementById('isha').classList.add('active');
    }

    function updateData() {
        const juz = document.getElementById('q-juz').value;
        document.getElementById('q-bar').style.width = (juz / 30 * 100) + '%';
        localStorage.setItem('ramadan_juz', juz);
        const checks = Array.from(document.querySelectorAll('.cb')).map(c => c.checked);
        localStorage.setItem('ramadan_checks', JSON.stringify(checks));
    }

    window.onload = () => {
        document.getElementById('q-juz').value = localStorage.getItem('ramadan_juz') || 0;
        const saved = JSON.parse(localStorage.getItem('ramadan_checks') || '[]');
        document.querySelectorAll('.cb').forEach((c, i) => c.checked = saved[i] || false);
        updateData();
        setInterval(updateApp, 1000);
        updateApp();
    }
</script>
</body>
</html>
